<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>FocusMate Prototype</title>
  <style>
    body { font-family: Arial, sans-serif; background:#F0F8FF; margin:0; padding:0; display:flex; flex-direction:column; align-items:center; }
    h1 { color:#2E86C1; margin-top:50px; }
    h3 { color:#117A65; margin-bottom:30px; }
    .button { padding:15px 30px; margin:10px; font-size:1.2rem; border-radius:10px; border:none; cursor:pointer; color:white; }
    .student-btn { background-color:#5DADE2; }
    .parent-btn { background-color:#58D68D; }
    .container { max-width:500px; width:90%; margin-top:30px; }
    .task { display:flex; justify-content:space-between; align-items:center; padding:15px; margin:10px 0; border-radius:10px; border:1px solid #ccc; background-color:#fff; }
    .task.completed { background-color:#D5F5E3; text-decoration:line-through; }
    .progress-bar { height:20px; border-radius:10px; background:#D6EAF8; margin:10px 0; }
    .progress-inner { height:100%; border-radius:10px; background:#58D68D; width:0%; }
    .hidden { display:none; }
  </style>
</head>
<body>

  <h1>FocusMate</h1>
  <h3>Turn chaos into clarity</h3>

  <div id="home" class="container">
    <button class="button student-btn" onclick="showStudent()">Je suis élève</button>
    <button class="button parent-btn" onclick="showParent()">Je suis parent</button>
  </div>

  <div id="studentDashboard" class="container hidden">
    <h2>Dashboard Élève</h2>
    <div id="timerDisplay" style="font-size:2rem; text-align:center; margin:20px 0;"></div>
    <div id="tasksContainer"></div>
    <button onclick="backHome()">Retour</button>
  </div>

  <div id="parentDashboard" class="container hidden">
    <h2>Dashboard Parent</h2>
    <div id="parentTasksContainer"></div>
    <div class="progress-bar">
      <div id="progressInner" class="progress-inner"></div>
    </div>
    <button onclick="backHome()">Retour</button>
  </div>

<script>
  // Liste de tâches simulées
  let tasks = [
    {name:"Math - Exercices 1", completed:false},
    {name:"Lecture - Chapitre 2", completed:false},
    {name:"Sciences - TP", completed:false}
  ];

  let currentTask = null;
  let timer = 0;
  let timerInterval = null;

  function showStudent(){
    document.getElementById("home").classList.add("hidden");
    document.getElementById("studentDashboard").classList.remove("hidden");
    renderTasks();
  }

  function showParent(){
    document.getElementById("home").classList.add("hidden");
    document.getElementById("parentDashboard").classList.remove("hidden");
    renderParent();
  }

  function backHome(){
    clearInterval(timerInterval);
    document.getElementById("studentDashboard").classList.add("hidden");
    document.getElementById("parentDashboard").classList.add("hidden");
    document.getElementById("home").classList.remove("hidden");
  }

  function renderTasks(){
    const container = document.getElementById("tasksContainer");
    container.innerHTML = "";
    tasks.forEach((task, index)=>{
      const div = document.createElement("div");
      div.className = "task" + (task.completed?" completed":"");
      div.innerHTML = `<span>${task.name}</span>
      <div>
        <button onclick="startTask(${index})" ${task.completed?"disabled":""}>Start</button>
        <button onclick="completeTask(${index})" ${task.completed?"disabled":""}>Terminer</button>
      </div>`;
      container.appendChild(div);
    });
  }

  function renderParent(){
    const container = document.getElementById("parentTasksContainer");
    container.innerHTML = "";
    tasks.forEach(task=>{
      const div = document.createElement("div");
      div.className = "task" + (task.completed?" completed":"");
      div.textContent = task.name + " : " + (task.completed?"✅ Terminé":"⏳ En cours");
      container.appendChild(div);
    });
    const progressPercent = tasks.length ? Math.round(tasks.filter(t=>t.completed).length / tasks.length *100) : 100;
    document.getElementById("progressInner").style.width = progressPercent+"%";
  }

  function startTask(index){
    if(timerInterval) clearInterval(timerInterval);
    currentTask = tasks[index];
    timer = 1500; // 25min
    updateTimerDisplay();
    timerInterval = setInterval(()=>{
      timer--;
      updateTimerDisplay();
      if(timer<=0){
        clearInterval(timerInterval);
        alert("Fin de session pour "+currentTask.name);
      }
    },1000);
  }

  function completeTask(index){
    tasks[index].completed = true;
    renderTasks();
    renderParent();
    if(currentTask === tasks[index]) clearInterval(timerInterval);
    alert("Tâche '"+tasks[index].name+"' terminée !");
  }

  function updateTimerDisplay(){
    const minutes = Math.floor(timer/60);
    const seconds = timer%60;
    document.getElementById("timerDisplay").textContent = `${minutes}:${seconds<10?"0"+seconds:seconds}`;
  }
</script>

</body>
</html>
